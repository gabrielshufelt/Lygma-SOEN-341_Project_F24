<div class="containers hall-building">
	<div class="gradient-filter">
		<header class="section one">
			<h1>Hello <%= current_user.first_name %>!</h1>
			<p><%= DateTime.now.strftime("Today is %A, %B %d, %Y") %>.</p>
            <% unless @avg_ratings.empty? %>
                <div class="student-overview">
                    <div class="overview one">Cooperation: <%= @avg_ratings[:cooperation] %> </div>
                    <div class="overview two">Conceptual Contribution: <%= @avg_ratings[:conceptual] %></div>
                    <div class="overview three">Practical Contribution: <%= @avg_ratings[:practical] %></div>
                    <div class="overview four">Work Ethic: <%= @avg_ratings[:work_ethic] %></div>
                </div>
            <% end %>
		</header>

		<section class="section">
			<h2>Upcoming Evaluations</h2>
            <div class="upcoming-evaluations-container">
                <% if @upcoming_evaluations.present? %>
                    <% @upcoming_evaluations.each do |upcoming_evaluation| %>
                        <%= render partial: 'evaluation', locals: { upcoming_evaluation: upcoming_evaluation } %>
                    <% end %>
                <% else %>
                    <%= render 'partials/floating_box', 
                        icon: "fa-solid fa-clock",
                        content: "No upcoming evaluations" 
                    %>
                <% end %>
            </div>
		</section>

        <section class="section">
            <h2>Average Ratings by Project</h2>

            <!-- Dropdown for Project Selection -->
            <div class="project-filter">
                <%= select_tag "project_filter", options_for_select(['Overall'] + @average_ratings_by_project.keys), id: "project_selector", onchange: "this.form.submit()" %>
            </div>

            <!-- Column Chart for Average Ratings -->
            <div class="student-chart">
               <%= column_chart project_data, id: "ratings_chart", height: "300px", library: { title: { text: "Average Ratings" } } %>
            </div>
        </section>
	</div>
</div>
